import java.text.SimpleDateFormat

ext {
    defaultManifest = { args ->
        def proj = args.project
        def projectVendor = args.projectVendor
        def mainClassName = args.mainClassName;
        // 如果未传入 version 参数，则默认采用传入的 proj 的属性
        def projectVersion = args.version ? args.version : proj.version
        return manifest {
            def buildTimeAndDate = new Date()
            def buildDate = new SimpleDateFormat('yyyy-MM-dd').format(buildTimeAndDate)
            def buildTime = new SimpleDateFormat('HH:mm').format(buildTimeAndDate)


            attributes 'Built-By': System.properties['user.name']
            attributes 'Created-By': System.properties['java.version'] + " (" + System.properties['java.vendor'] + " " + System.getProperty("java.vm.version") + ")"
            attributes 'Build-Host': InetAddress.localHost.hostName
            attributes 'Build-Date': buildDate
            attributes 'Build-Time': buildTime
            attributes 'Timestamp': String.valueOf(System.currentTimeMillis())
            attributes 'Specification-Title': proj.archivesBaseName
            attributes 'Specification-Version': projectVersion
            attributes 'Specification-Vendor': projectVendor
            attributes 'Implementation-Title': proj.archivesBaseName
            attributes 'Implementation-Version': projectVersion
            attributes 'Implementation-Vendor': projectVendor
            attributes 'provider': 'gradle'
            attributes 'Main-Class-Name': mainClassName
        }
    }

    libraries = [
            //  JUNBO库
            "dom4j"                    : "org.dom4j:dom4j:2.0.1",
            //  Spring Cloud 相关
            "eureka-server"            : "org.springframework.cloud:spring-cloud-starter-netflix-eureka-server",
            "eureka-client"            : "org.springframework.cloud:spring-cloud-starter-netflix-eureka-client",
            "eureka"                   : "org.springframework.cloud:spring-cloud-starter-eureka",
            //  配置中心
            "com.jch.market.config-server"            : "org.springframework.cloud:spring-cloud-com.jch.market.config-server",
            "com.jch.market.config-client"            : "org.springframework.cloud:spring-cloud-starter-com.jch.market.config",
            "bus-amqp"                 : "org.springframework.cloud:spring-cloud-starter-bus-amqp",
            "amqp"                     : "org.springframework.boot:spring-boot-starter-amqp",
            //  网关
            "gateway"                  : "org.springframework.cloud:spring-cloud-starter-gateway",
            //  远程调用
            "openfeign"                : "org.springframework.cloud:spring-cloud-starter-openfeign",
            //  链路追踪
            "sleuth"                   : "org.springframework.cloud:spring-cloud-starter-sleuth",
            "zipkin"                   : "org.springframework.cloud:spring-cloud-starter-zipkin",
            //  断路器/熔断器
            "hystrix"                  : "org.springframework.cloud:spring-cloud-starter-netflix-hystrix",
            "turbine"                  : "org.springframework.cloud:spring-cloud-netflix-turbine",
            "turbine-stream"           : "org.springframework.cloud:spring-cloud-starter-turbine-stream",
            "stream-rabbit"            : "org.springframework.cloud:spring-cloud-starter-stream-rabbit",
            "hystrix-dashboard"        : "org.springframework.cloud:spring-cloud-starter-hystrix-dashboard",
            "actuator"                 : "org.springframework.boot:spring-boot-starter-actuator",

            "spring-boot-mybaits"      : "org.mybatis.spring.boot:mybatis-spring-boot-starter:1.3.2",
            "page-helper"              : "com.github.pagehelper:pagehelper-spring-boot-starter:1.2.5",
            "druid"                    : "com.alibaba:druid-spring-boot-starter:1.1.9",
            "mysql"                    : "mysql:mysql-connector-java",
            "jpa"                      : "org.springframework.boot:spring-boot-starter-data-jpa",
            "shiro"                    : "org.apache.shiro:shiro-spring:1.4.0",
            "redis"                    : "org.springframework.boot:spring-boot-starter-data-redis",
            "session-redis"            : "org.springframework.session:spring-session-data-redis",
            'spring-session'           : "org.springframework.session:spring-session:1.3.3.RELEASE",
            "spring-web"               : "org.springframework.boot:spring-boot-starter-web",
            "spring-devtools"          : "org.springframework.boot:spring-boot-devtools",
            "log4j2"                   : "org.springframework.boot:spring-boot-starter-log4j2",
            "common-lang3"             : "org.apache.commons:commons-lang3:3.6",
            "common-codec"             : "commons-codec:commons-codec",
            "spring-boot-json"         : "org.springframework.boot:spring-boot-starter-json",
            "lombok"                   : "org.projectlombok:lombok:1.16.16",
            "commons-text"             : "org.apache.commons:commons-text:1.3",
            "poi"                      : "org.apache.poi:poi:3.6",
            "rxJava"                   : "io.reactivex.rxjava2:rxjava:2.1.1",
            "bouncycastle"             : "org.bouncycastle:bcprov-jdk15on:1.59",
            "email"                    : "org.springframework.boot:spring-boot-starter-mail",
            "freemarker"               : "org.springframework.boot:spring-boot-starter-freemarker",
            "zxing-core"               : "com.google.zxing:core:3.3.3",
            "zxing-javase"             : "com.google.zxing:javase:3.3.3",
            //  API
            "swagger"                  : "io.springfox:springfox-swagger2:2.9.2",
            "swagger-ui"               : "io.springfox:springfox-swagger-ui:2.9.2",
            //bouncycastle
            "bouncycastle"             : "org.bouncycastle:bcprov-jdk15:1.46",
            //lombok
            "lombok"                   : "org.projectlombok:lombok:1.18.6",
            //dom4j
            "dom4j"                    : "dom4j:dom4j:1.6.1",

            //poi
            "poi"                      : "org.apache.poi:poi:3.9",
            //"poi-ooxml"                : "org.apache.poi:ooxml:3.9",
            //"poi-scratchpad"           : "org.apache.poi:scratchpad:3.9",
            //"poi-schemas"              : "org.apache.poi:schemas:3.9",
            "httpclient"               : "org.apache.httpcomponents:httpclient:4.5.2"
    ]

    versions = [
            springBootVersion: '2.0.3.RELEASE'
    ]

}